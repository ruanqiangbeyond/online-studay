<!DOCTYPE html>
<html ng-app="main">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="../../js/angular-1.3.0.js"></script>
    <script src="../../js/provide/app_service.js"></script>
    <script type="text/javascript">
            var app = angular.module('main', ['appService']);

            app.controller('ctrl', ['$scope', 'serviceService', function($scope, serviceService) {
                  	$scope.name = serviceService.name; 
                  	
                  	
                  	$scope.getName = function() {
                  		$scope.$watch('name_', function(newVal, oldVal) {
                  			if (newVal != oldVal) {
                  				serviceService.setName(newVal);
                  			}
                  			else {
                  				serviceService.setName(oldVal);
                  			}
                  		});
                  		$scope.name = serviceService.name;	
                  	}
                }]);
    </script>

</head>
<body>
    <div ng-controller="ctrl">
        name: {{name}}<br></br?>
        <input type="text" ng-model="name_"/>
        <button ng-click = "getName()">点击按钮，从新设置名称</button>
    </div>
</body>	
</html>